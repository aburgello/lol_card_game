<% if @game.game_type == "quiz" %>
  <div class="max-w-[90vw] xl:max-w-[70vw] mx-auto p-6 bg-gradient-to-r from-[#0A1428]/20 to-[#0A0C14]/20 rounded-lg shadow-md border border-slate-900">
    <h3 class="text-3xl font-semibold mb-6 text-center text-[#C8AA6E] border-b pb-4 border-[#C8AA6E]/20">
      <%= @game.name %>
    </h3>
     <% if @user.quiz_attempts_today < 5 %><p class="text-slate-400 text-center mb-6"><%= @game.description %></p>

    <!-- Show Quiz Attempts -->
    <div class="text-center text-sm text-slate-400 mb-6">
      You had <span id="attempts-count"><%= @user.quiz_attempts_today %> / 5</span> attempts today
    </div>
      <% else %>
<%end%>
    <!-- Quiz Card -->
    <div class="bg-slate-800/30 rounded-lg shadow-lg p-6 border border-slate-700/50">
      <% if @user.quiz_attempts_today >= 5 %>
        <!-- Limit reached message -->
        <h4 class="text-xl text-[#C8AA6E] mx-auto text-center font-medium">You've reached your daily limit! Come back tomorrow.</h4>
      <% else %>
        <!-- Normal quiz display -->
        <h4 id="question" class="text-xl text-[#C8AA6E]  font-medium mb-4"><%= @question %></h4>
        <div data-controller="quiz"
             data-quiz-game-id="<%= @game.id %>"
             data-quiz-min-reward="<%= @game.min_reward %>"
             data-quiz-questions="<%= @questions.to_json %>"
             data-quiz-attempts-today="<%= @user.quiz_attempts_today %>">
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <% @answers.each do |answer| %>
              <button 
                class="block w-full bg-slate-700 text-slate-300 hover:bg-[#C8AA6E] hover:text-slate-900 py-4 px-4 rounded-lg transition-all duration-200"
                data-action="click->quiz#selectAnswer"
                data-answer="<%= answer %>"
              >
                <%= answer %>
              </button>
            <% end %>
          </div>
          <div id="feedback" class="mt-4 text-center text-lg font-semibold"></div>
        </div>
      <% end %>
    </div>
  </div>
<% end %>


<% if @game.game_type == "ability_guess" %>
  <div class="max-w-[90vw] xl:max-w-[70vw] mx-auto p-6 bg-gradient-to-r from-[#0A1428]/20 to-[#0A0C14]/20 rounded-lg shadow-md border border-slate-900">
    <h3 class="text-3xl font-semibold mb-6 text-center text-[#C8AA6E] border-b pb-4 border-[#C8AA6E]/20">
      <%= @game.name %>
    </h3>
    <% if @user.ability_guess_attempts_today < 5 %>
      <p class="text-slate-400 text-center mb-6"><%= @game.description %></p>

      <div class="text-center text-sm text-slate-400 mb-6">
        You had <span id="attempts-count"><%= @user.ability_guess_attempts_today %> / 5</span> attempts today
      </div>
    <% else %>
      <h4 class="text-xl text-[#C8AA6E] mx-auto text-center font-medium">You've reached your daily limit! Come back tomorrow.</h4>
    <% end %>

    <div class="bg-slate-800/30 rounded-lg shadow-lg p-6 border border-slate-700/50">
      <% if @user.ability_guess_attempts_today < 5 %>
        <h4 class="text-xl text-[#C8AA6E]  font-medium mb-4">Guess the Champion by Ability Icon</h4>
        <div class="text-center">
          <img src="<%= @game.icon_url %>" alt="Ability Icon" class="mx-auto mb-4 w-40 h-40 object-contain" />
          <div data-controller="abilityGuess"
               data-game-id="<%= @game.id %>"
               data-min-reward="<%= @game.min_reward %>"
               data-max-reward="<%= @game.max_reward %>"
               data-attempts-today="<%= @user.ability_guess_attempts_today %>">
            <input type="text" id="champion-guess" placeholder="Enter your guess..." class="text-center w-full p-3 bg-slate-700 text-slate-300 rounded-lg mb-4" />
            <button class="w-full p-3 bg-[#C8AA6E] hover:bg-[#C8AA6E]/90 text-slate-900 rounded-lg">Submit Guess</button>
            <div id="feedback" class="mt-4 text-center text-lg font-semibold"></div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
<% if @game.game_type == "skin_snippet" %>
  <div class="max-w-[90vw] xl:max-w-[70vw] mx-auto p-6 bg-gradient-to-r from-[#0A1428]/20 to-[#0A0C14]/20 rounded-lg shadow-md border border-slate-900">
    <h3 class="text-3xl font-semibold mb-6 text-center text-[#C8AA6E] border-b pb-4 border-[#C8AA6E]/20">
      <%= @game.name %>
    </h3>
    <% if @user.skin_snippet_attempts_today < 5 %>
      <p class="text-slate-400 text-center mb-6"><%= @game.description %></p>

      <div class="text-center text-sm text-slate-400 mb-6">
        You had <span id="attempts-count"><%= @user.skin_snippet_attempts_today %> / 5</span> attempts today
      </div>
    <% else %>
      <h4 class="text-xl text-[#C8AA6E] mx-auto text-center font-medium">You've reached your daily limit! Come back tomorrow.</h4>
    <% end %>

    <div class="bg-slate-800/30 rounded-lg shadow-lg p-6 border border-slate-700/50">
      <% if @user.skin_snippet_attempts_today < 5 %>
        <h4 class="text-xl text-[#C8AA6E]  font-medium mb-4">Identify the Champion by Skin Snippet</h4>
        <div class="text-center">
          <img src="<%= @game.snippet_url %>" alt="Skin Snippet" class="mx-auto mb-4 w-40 h-40 object-contain" />
          <div data-controller="skinSnippet"
               data-game-id="<%= @game.id %>"
               data-min-reward="<%= @game.min_reward %>"
               data-max-reward="<%= @game.max_reward %>"
               data-attempts-today="<%= @user.skin_snippet_attempts_today %>">
            <input type="text" id="champion-guess" placeholder="Enter your guess..." class="text-center w-full p-3 bg-slate-700 text-slate-300 rounded-lg mb-4" />
            <button class="w-full p-3 bg-[#C8AA6E] hover:bg-[#C8AA6E]/90 text-slate-900 rounded-lg">Submit Guess</button>
            <div id="feedback" class="mt-4 text-center text-lg font-semibold"></div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
          <!-- SKIN NAME GAME -->
<% if @game.game_type == "skin_name" %>
  <div class="max-w-[90vw] xl:max-w-[50vw] mx-auto p-6 bg-gradient-to-r from-[#0A1428]/20 to-[#0A0C14]/20 rounded-lg shadow-md border border-slate-900">
    <h3 class="text-3xl font-semibold mb-6 text-center text-[#C8AA6E] border-b pb-4 border-[#C8AA6E]/20">
      <%= @game.name %>
    </h3>
    <% if @user.skin_name_attempts_today < 5 %>
      <div class="text-center text-sm text-slate-400 mb-6">
        You had <span id="attempts-count-skin"><%= @user.skin_name_attempts_today %> / 5</span> attempts today
      </div>
    <% else %>
    <% end %>

    <div class="bg-slate-800/30 rounded-lg shadow-lg p-6 border border-slate-700/50 relative">
      <% if @user.skin_name_attempts_today >= 5 %>      
        <h4 class="text-md text-[#C8AA6E] mx-auto text-center font-medium">You've reached your daily limit! Come back tomorrow.</h4>
      <% else %>
        <div class="text-center">
          <!-- Display the splash art with blur effect -->
          <img src="<%= @icon_url %>" alt="Skin Splash Art" class="mx-auto my-4 w-[48rem] border-2 border-[#C8AA6E] blur-effect object-contain transition-all duration-500" id="skin-image" />

          <p class="text-xl font-bold text-[#C8AA6E] mt-4 flex justify-center items-center">
            <%= @masked_skin_name %> 
            <!-- Eye icon to remove blur -->
            <span id="remove-blur-icon" class="ml-8 text-xl cursor-pointer text-[#C8AA6E] hover:text-[#C8AA6E]/80">
              <i class="fas fa-eye"></i>
            </span>
            <!-- Dice roll icon to refresh -->
            <span id="refresh-icon" class="ml-2 text-xl cursor-pointer text-[#C8AA6E] hover:text-[#C8AA6E]/80">
              <i class="fas fa-dice"></i>
            </span>
          </p>

          <div data-controller="skin-name">
            <form id="skin-name-form" action="/games/skin_name_guess" method="POST" data-remote="true">
              <input type="text" id="skin-name-guess" name="submitted_name" placeholder="Complete the name..." class="text-center w-full p-3 bg-slate-700 text-slate-300 rounded-lg my-4" />
              <button class="w-full p-3 bg-[#C8AA6E] hover:bg-[#C8AA6E]/90 text-slate-900 rounded-lg">Submit Guess</button>
            </form>
            <div id="feedback" class=" text-center text-lg font-semibold"></div>
          </div>
        </div>
      <% end %>
    </div>

  </div>
<% end %>



<style>
.blur-effect {
  filter: blur(0.5rem);
}
</style>