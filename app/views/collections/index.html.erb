<div class="lg:max-w-screen-2xl mx-4 lg:mx-32 2xl:mx-auto mb-12 my-8 rounded-lg">
  <div class="grid grid-cols-1">
    <div class="flex flex-col items-center relative mx-4 md:mx-0">
      <div class="mt-8 p-4 w-full bg-gradient-to-r from-[#0A1428]/20 to-[#0A0C14]/20 pt-4 rounded-lg shadow-md border border-slate-900">
  <h3 class="text-3xl font-semibold mb-6 text-center text-[#C8AA6E] border-b pb-4 mx-6 border-[#C8AA6E]/20 cursor-default">Your Skins</h3>
  
  <% if @user_skins.empty? %>
    <div class="flex flex-col items-center justify-center py-12 text-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-24 w-24 text-[#C8AA6E] mb-4 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
      </svg>
      <h2 class="text-2xl font-bold text-[#C8AA6E] mb-2">No Skins Unlocked Yet</h2>
      <p class="text-gray-400 mb-6">Complete challenges to unlock all champions unique skins.</p>
      <%= link_to "Browse Champions", champions_path, class: "bg-[#C8AA6E] text-[#0A1428] px-6 py-2 rounded-lg hover:bg-opacity-90 hover:text-white transition-all duration-100 ease-in-out" %>
    </div>
  <% else %>
        
        <% rarity_order = ["common", "rare", "epic", "legendary", "mythic", "ultimate", "transcendent"] %>
        <% grouped_skins = @user_skins.group_by(&:rarity).sort_by { |rarity, _| rarity_order.index(rarity.downcase) || rarity_order.size } %>
        
        <% grouped_skins.each do |rarity, skins| %>
          <div class="mt-4 mb-2">
            <div class="flex flex-col items-center">
              <img src="<%= asset_path(rarity.capitalize + '_logo.webp') %>" alt="<%= rarity %> logo" class="cursor-default hover:brightness-125 w-6 h-6 shadow-md transition-all duration-200 ease-in-out">
              <h4 class="text-2xl font-bold text-[#C8AA6E] mb-6 cursor-default"><%= rarity.capitalize %></h4>
            </div>
            
            <% grid_class = case skins.length
               when 1 then "grid-cols-1"
               when 2 then "grid-cols-1 sm:grid-cols-2"
               else "grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"
               end %>
            
            <div class="grid <%= grid_class %> gap-8 mx-auto lg:mx-24">
              <% skins.each do |skin| %>
                <div class="relative group bg-gray-800 rounded-lg shadow-lg cursor-pointer  transition-all duration-300 ease-in-out overflow-hidden flex justify-center items-center <%= 'max-w-2xl mx-auto' if skins.length < 3 %>">
<div class="relative group bg-gray-800 rounded-lg shadow-lg cursor-pointer  transition-all duration-300 ease-in-out overflow-hidden flex justify-center items-center <%= 'max-w-2xl mx-auto' if skins.length < 3 %>">
  <div class="relative w-full">
    <%= image_tag skin.splash_art_centered, 
        alt: "#{skin.name} loading art",  
        loading: "lazy",
        class: "w-full h-full object-cover rounded-lg shadow-md group-hover:scale-110 saturate-[1.10] brightness-100  group-hover:brightness-[1.10] transition-all duration-500 ease-in-out",
        data: { 
          skin_splash: skin.splash_art, 
          skin_name: "#{skin.champion.name} - #{skin.name}", 
          skin_description: skin.description, 
          skin_rarity: skin.rarity 
        } %>
    
    <div class="absolute bottom-0 left-0 w-full ">
      <div class="absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-900/10 to-transparent opacity-100 rounded-b-lg"></div>
      <div class="relative z-10 px-6 py-4">
        <div class="text-base md:text-2xl font-bold text-[#C8AA6E] text-left" style="cursor: default; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);">
          <%= skin.name %>
        </div>
      </div>
    </div>
  </div>

  <div class="absolute inset-0 border-0 group-hover:border-4 <%= 'border-' + skin.rarity.downcase %> group-hover:animate-pulse rounded-lg transition-all duration-300 ease-in-out" style="pointer-events: none;"></div>
</div>

  <div class="absolute inset-0 border-0 group-hover:border-4 <%= 'border-' + skin.rarity.downcase %> group-hover:animate-pulse rounded-lg transition-all duration-300 ease-in-out" style="pointer-events: none;"></div>
</div>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
    <% end %>

</div>

<!-- Modal to Show Full Splash Art -->
<div id="splash-art-modal" class="fixed mx-2 inset-0 bg-black hidden bg-opacity-80 items-center justify-center z-50 flex">
  <div id="splash-art-modal-bg" class="bg-slate-950 p-3 rounded-xl max-w-6xl w-full relative">
    <div class="relative group flex justify-center">
      <img id="splash-art-image" src="/api/placeholder/800/400" alt="Splash Art" 
           class="max-w-full max-h-full object-contain rounded-xl shadow-[0_4px_15px_rgba(0,0,0,0.75)]">
<div class="absolute inset-0 flex flex-col justify-end items-start bg-gradient-to-t from-slate-950 via-slate-900/10 to-transparent opacity-100 group-hover:opacity-0 transition-opacity duration-700 ease-in-out rounded-xl">
        <div class="w-full relative">
          <div id="modal-skin-name" 
               class="bottom-0 left-0 px-6 py-0 translate-y-0 group-hover:translate-y-6
                      text-base md:text-2xl font-bold text-[#C8AA6E] text-center
                      transform transition-all duration-500  md:opacity-100 group-hover:opacity-0
                      group-hover:relative
                      group-hover:text-white" style="cursor: default; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);">
            Skin Name
          </div>
          <div id="modal-skin-description"
               class="px-6 pb-4 group-hover:pb-0 pt-2 text-sm md:text-lg text-white
                      opacity-100 group-hover:opacity-0 text-center
                      transition-all duration-300 ease-in-out">
            This is a longer description that might span multiple lines. We want to make sure our title adapts properly to however long this description might be. It could be quite extensive in some cases.
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


 
      <div class="mt-8 p-4 w-full bg-gradient-to-r from-[#0A1428]/20 to-[#0A0C14]/20 pt-4 rounded-lg shadow-md border border-slate-900">
        <h3 class="text-3xl font-semibold mb-6 text-center text-[#C8AA6E] border-b pb-4 mx-6 border-[#C8AA6E]/20 cursor-default">Discovered Regions</h3>
        
        <% if @user_regions.empty? %>
          <div class="flex flex-col items-center justify-center py-12 text-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-24 w-24 text-[#C8AA6E] mb-4 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
            <h2 class="text-2xl font-bold text-[#C8AA6E] mb-2">No Regions Discovered Yet</h2>
            <p class="text-gray-400 mb-6">Explore Runeterra Prime and discover all the regions.</p>
            <%= link_to "Explore Regions", regions_path, class: "bg-[#C8AA6E] text-[#0A1428] px-6 py-2 rounded-lg hover:bg-opacity-90 hover:text-white transition-all duration-100 ease-in-out" %>
          </div>
        <% else %>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mx-auto lg:mx-24">
            <% @user_regions.each do |user_region| %>
              <% region = user_region.region %> <!-- Assuming user_region has a method to get the associated region -->
              <div class="relative group bg-gray-800 rounded-lg shadow-lg cursor-pointer transition-all duration-300 ease-in-out overflow-hidden flex justify-center items-center">
                <div class="relative w-full">
                  <%= image_tag region.image_backdrop, 
                      alt: "#{region.name} backdrop",  
                      loading: "lazy",
                      class: "w-full h-full object-cover rounded-lg shadow-md group-hover:scale-110 saturate-[1.10] brightness-100 group-hover:brightness-[1.10] transition-all duration-500 ease-in-out" %>
                  
                  <div class="absolute bottom-0 left-0 w-full ">
                    <div class="absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-900/10 to-transparent opacity-100 rounded-b-lg"></div>
                    <div class="relative z-10 px-6 py-4">
                      <div class="text-base md:text-2xl font-bold text-[#C8AA6E] text-left" style="cursor: default; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);">
                        <%= region.name %>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
 

<!-- Modal to Show Region Details -->
<div id="region-modal" class="fixed mx-2 inset-0 bg-black hidden bg-opacity-80 items-center justify-center z-50 flex">
  <div id="region-modal-bg" class="bg-slate-950 p-3 rounded-xl max-w-6xl w-full relative">
    <div class="relative group flex justify-center">
      <img id="region-image" src="/api/placeholder/800/400" alt="Region" 
           class="max-w-full max-h-full object-contain rounded-xl shadow-[0_4px_15px_rgba(0,0,0,0.75)]">
      <div class="absolute inset-0 flex flex-col justify-end items-start bg-gradient-to-t from-slate-950 via-slate-900/10 to-transparent opacity-100 group-hover:opacity-0 transition-opacity duration-700 ease-in-out rounded-xl">
        <div class="w-full relative">
          <div id="modal-region-name" 
               class="bottom-0 left-0 px-6 py-0 translate-y-0 group-hover:translate-y-6
                      text-base md:text-2xl font-bold text-[#C8AA6E] text-center
                      transform transition-all duration-500  md:opacity-100 group-hover:opacity-0
                      group-hover:relative
                      group-hover:text-white" style="cursor: default; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);">
            Region Name
          </div>
          <div id="modal-region-description"
               class="px-6 pb-4 group-hover:pb-0 pt-2 text-sm md:text-lg text-white
                      opacity-100 group-hover:opacity-0 text-center
                      transition-all duration-300 ease-in-out">
            This is a longer description that might span multiple lines. We want to make sure our title adapts properly to however long this description might be. It could be quite extensive in some cases.
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
 document.querySelectorAll('[data-region-name]').forEach(img => {
  img.addEventListener('click', function () {
    const regionImage = this.getAttribute('data-region-image');
    const regionName = this.getAttribute('data-region-name');
    const regionDescription = this.getAttribute('data-region-description');
    const modal = document.getElementById('region-modal');
    const regionImg = document.getElementById('region-image');
    const modalRegionName = document.getElementById('modal-region-name');
    const modalRegionDescription = document.getElementById('modal-region-description');
    const modalBg = document.getElementById('region-modal-bg');

    // Update modal content
    regionImg.src = regionImage;
    modalRegionName.textContent = regionName;
    modalRegionDescription.innerHTML = regionDescription || 'No description available.';
    modal.classList.remove('hidden');
  });
});

document.getElementById('region-modal').addEventListener('click', function (e) {
  if (e.target === this) {
    this.classList.add('hidden');
  }
});
</script>


<script>
 document.querySelectorAll('[data-skin-splash]').forEach(img => {
  img.addEventListener('click', function () {
    const splashArt = this.getAttribute('data-skin-splash');
    const skinName = this.getAttribute('data-skin-name');
    const skinDescription = this.getAttribute('data-skin-description');
    const rarity = this.getAttribute('data-skin-rarity'); // Get the rarity
    const modal = document.getElementById('splash-art-modal');
    const splashImage = document.getElementById('splash-art-image');
    const modalSkinName = document.getElementById('modal-skin-name');
    const modalSkinDescription = document.getElementById('modal-skin-description');
    const modalBg = document.getElementById('splash-art-modal-bg');
    
    // Remove existing rarity classes for background and border
    modalBg.classList.remove(
      'bg-mythic', 'bg-ultimate', 'bg-legendary', 'bg-transcendent', 'bg-common', 'bg-epic',
      'border-mythic', 'border-ultimate', 'border-legendary', 'border-transcendent', 'border-common', 'border-epic'
    );
    
    // Add the new rarity classes based on the skin's rarity
    if (rarity) {
      modalBg.classList.add(`bg-${rarity.toLowerCase()}`);
      modalBg.classList.add(`border-${rarity.toLowerCase()}`);
    }

    // Update modal content
    splashImage.src = splashArt;
    modalSkinName.textContent = skinName;
    modalSkinDescription.innerHTML = skinDescription || 'No description available.';
    modal.classList.remove('hidden');
  });
});

document.getElementById('splash-art-modal').addEventListener('click', function (e) {
  if (e.target === this) {
    this.classList.add('hidden');
  }
});


</script>

<style>

  
  #splash-art-image {
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.75); /* Darker and more intense shadow */
}
.bg-mythic {
  background: linear-gradient(to bottom, rgba(122, 62, 237, 0.5), rgba(58, 33, 105, 0.5));
}

.bg-ultimate {
  background: linear-gradient(to bottom, rgba(255, 165, 0, 0.5), rgba(128, 74, 0, 0.5));
}

.bg-legendary {
  background: linear-gradient(to bottom, rgba(255, 50, 50, 0.5), rgba(128, 22, 22, 0.5));
}

.bg-transcendent {
  background: linear-gradient(to bottom, rgba(162, 162, 208, 0.5), rgba(82, 82, 140, 0.5));
}

.bg-common {
  background: linear-gradient(to bottom, rgba(128, 128, 128, 0.5), rgba(64, 64, 64, 0.5));
}
.bg-rare {
  background: linear-gradient(to bottom, rgba(200, 170, 110, 0.7), rgba(200, 170, 110, 0.7)); /* #C8AA6E */
}

.bg-epic {
  background: linear-gradient(to bottom, rgba(0, 200, 255, 0.5), rgba(0, 102, 128, 0.5));
}

.bg-mythic-modal {
  background-color: rgba(89, 50, 145, 0.3); /* Darker #7943ED with 0.3 opacity */
}

.bg-ultimate-modal {
  background: rgba(204, 136, 0, 0.3); /* Darker #FFA500 with 0.3 opacity */
}

.bg-legendary-modal {
  background: rgba(204, 0, 0, 0.1); /* Darker #FF3232 with 0.3 opacity */
}
.bg-rare-modal {
  background: rgba(200, 170, 110, 0.3); /* Darker #C8AA6E with 0.3 opacity */
}
.bg-transcendent-modal {
  background: rgba(129, 129, 163, 0.3); /* Darker #A2A2D0 with 0.3 opacity */
}

.bg-common-modal {
  background: rgba(102, 102, 102, 0.3); /* Darker #808080 with 0.3 opacity */
}

.bg-epic-modal {
  background: rgba(0, 153, 204, 0.3); /* Darker #00C8FF with 0.3 opacity */
}




.border-mythic {
  border: 1px solid #7943ED;
}

.border-ultimate {
  border:1px solid #FFA500;
}

.border-legendary {
  border:1px solid #FF3232;
}

.border-rare {
  border: 1px solid #C8AA6E; /* Updated border color */
}

.border-transcendent {
  border:1px solid #A2A2D0;
}

.border-common {
  border:1px solid #808080;
}

.border-epic {
  border:1px solid #00C8FF;
}

/* Hover border classes */
.group-hover\:border-mythic:hover {
  border: solid #7943ED;
}

.group-hover\:border-ultimate:hover {
  border:  solid #FFA500;
}

.group-hover\:border-legendary:hover {
  border:  solid #FF3232;
}

.group-hover\:border-transcendent:hover {
  border:  solid #A2A2D0;
}

.group-hover\:border-common:hover {
  border: solid #808080;
}

.group-hover\:border-epic:hover {
  border:  solid #00C8FF;
}

</style>